<!DOCTYPE html>
<html lang="en">


<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Gov-TLS-Audit</title>
<script  src="https://code.jquery.com/jquery-2.1.3.min.js" integrity="sha256-ivk71nXhz9nsyFDoYoGf2sbjrR9ddh+XDkCcfZxjvcM="
  crossorigin="anonymous"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
</head>

<body>
		
<div id="scans"></div>
<script>
	const url = "https://ec3ddicgjf.execute-api.us-west-2.amazonaws.com/Prod/listScans";
   	const resultsDiv = document.getElementById('scans');
   	resultsDiv.innerHTML = "";

  	fetch(url)
  	.then(function(response) {
  		 if(response.status === 200){
   			let scanspan = document.createElement('span');
   			let spanHead = "<br><br><h2> Following Scans Found:</h2>";
   			scanspan.innerHTML = spanHead
   			resultsDiv.appendChild(scanspan)
   			}
   	return response.json();
	})

	.then(function(response_json){
 
	response_json.files.forEach(function(element) {
			let filespan = document.createElement('span');
   			let filelink = "<br><a href=\"" + element.url + "\">"
   			let filename = element.fileName + " (" + element.fileSize + ")</a>"
   			filespan.innerHTML = filelink + filename
   			resultsDiv.appendChild(filespan)
	})
 	}).catch(function(error) {
  		return;
	});
</script>